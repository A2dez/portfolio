<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Flipping hell: The absolute hack of the data in Ireland’s property price register. – portfolio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-1713c1db1ad41a796903378fc9ac7b2b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.11.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">portfolio</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./chapter_1.html" aria-current="page"> 
<span class="menu-text">Property prices</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./thespellingof/spelling/th_affix.html"> 
<span class="menu-text">Spelling</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#reading-in-the-data" id="toc-reading-in-the-data" class="nav-link" data-scroll-target="#reading-in-the-data">Reading in the data</a></li>
  <li><a href="#what-is-contained-in-the-data" id="toc-what-is-contained-in-the-data" class="nav-link" data-scroll-target="#what-is-contained-in-the-data">What is contained in the data?</a>
  <ul class="collapse">
  <li><a href="#dates-and-sales" id="toc-dates-and-sales" class="nav-link" data-scroll-target="#dates-and-sales">Dates and sales</a></li>
  <li><a href="#new-homes-versus-old" id="toc-new-homes-versus-old" class="nav-link" data-scroll-target="#new-homes-versus-old">New homes versus old</a></li>
  <li><a href="#eircodes" id="toc-eircodes" class="nav-link" data-scroll-target="#eircodes">Eircodes</a></li>
  <li><a href="#house-prices-by-county" id="toc-house-prices-by-county" class="nav-link" data-scroll-target="#house-prices-by-county">House prices by county</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Flipping hell: The absolute hack of the data in Ireland’s property price register.</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/property_prices_since_2010.PNG" class="img-fluid figure-img"></p>
<figcaption><em>Since bottoming out in 2013, after The Crash, the price of houses in Ireland has just kept on rising.</em></figcaption>
</figure>
</div>
<p><img src="images/property_prices_by_county.PNG" class="img-fluid"></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/everywhere_is_expensive_now.PNG" class="img-fluid figure-img"></p>
<figcaption><em>Rural counties were slower to become expensive, but in 2025 a house in Westmeath is as expensive as one in Dublin in 2017.</em></figcaption>
</figure>
</div>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The property price index is a valuable resource which lists the price of every property sold since 2010 in (the twenty-six counties of) Ireland, but unfortunately, the database was designed by people who ‘know the price of everything but the value of nothing’. Allegedly, the data has been uploaded one entry at a time, by solicitors’ secretaries, many of whom express their humanity through misspelling and irregular punctuation, while several express their Irishness with the <em>cúpla focail</em>. This valuable dataset is thus a bit like being given a big five-bed house for a free holiday but having to wade through the previous tenants’ filth.</p>
<p>My role here is to take this unkempt raw data and flip it, scrubbing it goodo, and presenting it back to you, the reader, as an inhabitable space which, I hope, you can explore with some pleasure.</p>
</section>
<section id="reading-in-the-data" class="level2">
<h2 class="anchored" data-anchor-id="reading-in-the-data">Reading in the data</h2>
<p>The data is stored <a href="https://www.propertypriceregister.ie/website/npsra/pprweb.nsf/PPRDownloads?OpenForm">here</a> on the Property Price Register website, and from there we can download subgroups of the data, grouped by county, year or month. I want it all, so I’ve written a <em>purrr</em> function to read in each year’s property sales and then bind them into a single dataframe (using <em>map_dfr</em>). I’ve saved all columns as strings since it’s much faster and they all need cleaning inanyways. Finally I’ve had to encode them as <em>latin1</em> to avoid <a href="https://stackoverflow.com/a/14363274/13884083">this bug</a>, although I”m still not happy as it’s not reading the Euro symbol <em>€</em>.</p>
<p>Here’s the data contained in the first and last rows of the data, transposed for readability</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>property_raw[<span class="fu">c</span>(<span class="dv">1</span>,<span class="fu">nrow</span>(property_raw)),] <span class="sc">%&gt;%</span> <span class="fu">t</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>                          [,1]                                    
Date of Sale (dd/mm/yyyy) "01/01/2010"                            
Address                   "5 Braemor Drive, Churchtown, Co.Dublin"
County                    "Dublin"                                
Eircode                   NA                                      
Price (\u0080)            "\u0080343,000.00"                      
Not Full Market Price     "No"                                    
VAT Exclusive             "No"                                    
Description of Property   "Second-Hand Dwelling house /Apartment" 
Property Size Description NA                                      
                          [,2]                                   
Date of Sale (dd/mm/yyyy) "01/08/2025"                           
Address                   "TULLIGBEG, KILLORGLIN, CO KERRY"      
County                    "Kerry"                                
Eircode                   "V93P3C9"                              
Price (\u0080)            "\u0080250,000.00"                     
Not Full Market Price     "No"                                   
VAT Exclusive             "No"                                   
Description of Property   "Second-Hand Dwelling house /Apartment"
Property Size Description NA                                     </code></pre>
</div>
</div>
</section>
<section id="what-is-contained-in-the-data" class="level2">
<h2 class="anchored" data-anchor-id="what-is-contained-in-the-data">What is contained in the data?</h2>
<p>Each row in the dataset represents the sale of a single property. The sale date is included along with the sale price and the address. It is thus possible to see how much your neighbours paid for their gaff or indeed any property sold in Ireland since 2010. There is a useful column for the county and eircodes have been added to the data in recent years. There is some secondary data about the nature of the sale, such as whether the property was sold at the market price or not, whether VAT was charged, whether the house was new or second-hand. A column is included for the size of the property, roughly equating to tiny (&lt;38sq. m), large (&gt; 125 sq.m) or anything in-between.</p>
<p>The very first thing to do is to clean the column names which were either designed for humans to read on a spreadsheet, or, perhaps more likely, conceived as a set of instructions for those entering sale details into the database. I want them in a format suitable for coding in R. No capitals, spaces or excess descriptive baggage. First off, I will work create a copy of the property_raw dataframe so that I can start again every time I make an error, without having to read in the data again.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date of Sale (dd/mm/yyyy)" "Address"                  
[3] "County"                    "Eircode"                  
[5] "Price (\u0080)"            "Not Full Market Price"    
[7] "VAT Exclusive"             "Description of Property"  
[9] "Property Size Description"</code></pre>
</div>
</div>
<p>Let’s look at each column in turn, and, in doing so, I will clean them up, before plotting the cleaner version of the data. The date needs to be convered back to a data form, the year is essential, and I’m including quarter, month and day (of the week) because we might find them useful later, and it might just be interesting to see which days and months are the most common for sales and which are the most expensive.</p>
<section id="dates-and-sales" class="level3">
<h3 class="anchored" data-anchor-id="dates-and-sales">Dates and sales</h3>
<p>So the simplest thing to look at is how many properties have been sold each year since they started collecting the data.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-7c09b42fea8d1b50b0a2" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-7c09b42fea8d1b50b0a2">{"x":{"data":[{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025],"y":[21001,18440,25371,30217,43667,49162,49932,55015,57446,59052,49540,59580,62721,63300,61258,30804],"text":["year: 2010<br />sales: 21001","year: 2011<br />sales: 18440","year: 2012<br />sales: 25371","year: 2013<br />sales: 30217","year: 2014<br />sales: 43667","year: 2015<br />sales: 49162","year: 2016<br />sales: 49932","year: 2017<br />sales: 55015","year: 2018<br />sales: 57446","year: 2019<br />sales: 59052","year: 2020<br />sales: 49540","year: 2021<br />sales: 59580","year: 2022<br />sales: 62721","year: 2023<br />sales: 63300","year: 2024<br />sales: 61258","year: 2025<br />sales: 30804"],"type":"scatter","mode":"lines+markers","line":{"width":7.559055118110237,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(255,165,0,1)","opacity":1,"size":15.118110236220474,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(255,165,0,1)"}},"frame":null}],"layout":{"margin":{"t":42.168534661685349,"r":7.3059360730593621,"b":24.508094645080945,"l":37.525944375259442},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"<b> <i> Number of properties sold in Ireland each year, 2010-present <\/i> <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402243},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2009.25,2025.75],"tickmode":"array","ticktext":["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023","2024","2025"],"tickvals":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025],"categoryorder":"array","categoryarray":["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023","2024","2025"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10.62681610626816},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"<b>  <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835198}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,65000],"tickmode":"array","ticktext":["0","20000","40000","60000"],"tickvals":[0,20000,40000,60000],"categoryorder":"array","categoryarray":["0","20000","40000","60000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10.62681610626816},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"<b>  <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835198}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"28e07ea22d35":{"x":{},"y":{},"type":"scatter"},"28e074267145":{"x":{},"y":{}}},"cur_data":"28e07ea22d35","visdat":{"28e07ea22d35":["function (y) ","x"],"28e074267145":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>It’s pretty clear that there’s a massive difference between the recession of 2010-13 and the sudden return to form in 2014, followed by five more years of increased sales before Covid. Unsurprisingly, sales dropped in 2020, but they didn’t nosedive like, say, the airline industry, and 2021 shows a return to 2019 levels.</p>
<p>At the time of writing (November 2022), it is not immediately obvious if sales will increase from 2021, but, if we break down sales by month, as in the plot below, then that seems likely, as each month has been consistently a wee bit ahead thus far. This resolution makes it possible to see inside the grim years of the Covid pandemic. Understandably there were reduced sales in April 2020 (2647 sales vs 4562 in 2019), May (2592 v 4940), June (3083 v 4356), but things re-normalized by October (5576 v 5579) and November (5379 v 5264), while the end-of-year rush in the ‘meaningful’ month of December 2020 (7474 sales) was a good deal larger than December 2019 (6798).</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-494686aa8fa09e0caea3" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-494686aa8fa09e0caea3">{"x":{"data":[{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],"base":[50845,52240,42054,52462,55892,56078,54383],"x":[1,2,3,4,5,6,7],"y":[6601,6812,7486,7118,6829,7222,6875],"text":["count: 6601<br />year: 2018<br />month: Dec","count: 6812<br />year: 2019<br />month: Dec","count: 7486<br />year: 2020<br />month: Dec","count: 7118<br />year: 2021<br />month: Dec","count: 6829<br />year: 2022<br />month: Dec","count: 7222<br />year: 2023<br />month: Dec","count: 6875<br />year: 2024<br />month: Dec"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(252,255,164,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Dec","legendgroup":"Dec","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],"base":[45243,46974,36660,46853,49850,50364,48726],"x":[1,2,3,4,5,6,7],"y":[5602,5266,5394,5609,6042,5714,5657],"text":["count: 5602<br />year: 2018<br />month: Nov","count: 5266<br />year: 2019<br />month: Nov","count: 5394<br />year: 2020<br />month: Nov","count: 5609<br />year: 2021<br />month: Nov","count: 6042<br />year: 2022<br />month: Nov","count: 5714<br />year: 2023<br />month: Nov","count: 5657<br />year: 2024<br />month: Nov"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(245,219,75,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Nov","legendgroup":"Nov","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],"base":[39775,41387,31071,41270,44332,44740,42484],"x":[1,2,3,4,5,6,7],"y":[5468,5587,5589,5583,5518,5624,6242],"text":["count: 5468<br />year: 2018<br />month: Oct","count: 5587<br />year: 2019<br />month: Oct","count: 5589<br />year: 2020<br />month: Oct","count: 5583<br />year: 2021<br />month: Oct","count: 5518<br />year: 2022<br />month: Oct","count: 5624<br />year: 2023<br />month: Oct","count: 6242<br />year: 2024<br />month: Oct"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(252,173,18,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Oct","legendgroup":"Oct","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036],"base":[35181,36285,26725,35910,38576,39219,37375],"x":[1,2,3,4,5,6,7],"y":[4594,5102,4346,5360,5756,5521,5109],"text":["count: 4594<br />year: 2018<br />month: Sep","count: 5102<br />year: 2019<br />month: Sep","count: 4346<br />year: 2020<br />month: Sep","count: 5360<br />year: 2021<br />month: Sep","count: 5756<br />year: 2022<br />month: Sep","count: 5521<br />year: 2023<br />month: Sep","count: 5109<br />year: 2024<br />month: Sep"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(247,131,17,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Sep","legendgroup":"Sep","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],"base":[30229,31212,23735,31141,33482,33513,32437,30746],"x":[1,2,3,4,5,6,7,8],"y":[4952,5073,2990,4769,5094,5706,4938,58],"text":["count: 4952<br />year: 2018<br />month: Aug","count: 5073<br />year: 2019<br />month: Aug","count: 2990<br />year: 2020<br />month: Aug","count: 4769<br />year: 2021<br />month: Aug","count: 5094<br />year: 2022<br />month: Aug","count: 5706<br />year: 2023<br />month: Aug","count: 4938<br />year: 2024<br />month: Aug","count:   58<br />year: 2025<br />month: Aug"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(230,93,47,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Aug","legendgroup":"Aug","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],"base":[24990,25655,20045,25957,27903,28117,26703,26632],"x":[1,2,3,4,5,6,7,8],"y":[5239,5557,3690,5184,5579,5396,5734,4114],"text":["count: 5239<br />year: 2018<br />month: Jul","count: 5557<br />year: 2019<br />month: Jul","count: 3690<br />year: 2020<br />month: Jul","count: 5184<br />year: 2021<br />month: Jul","count: 5579<br />year: 2022<br />month: Jul","count: 5396<br />year: 2023<br />month: Jul","count: 5734<br />year: 2024<br />month: Jul","count: 4114<br />year: 2025<br />month: Jul"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(203,65,73,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Jul","legendgroup":"Jul","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],"base":[20355,21280,16955,21226,22452,22643,21797,21864],"x":[1,2,3,4,5,6,7,8],"y":[4635,4375,3090,4731,5451,5474,4906,4768],"text":["count: 4635<br />year: 2018<br />month: Jun","count: 4375<br />year: 2019<br />month: Jun","count: 3090<br />year: 2020<br />month: Jun","count: 4731<br />year: 2021<br />month: Jun","count: 5451<br />year: 2022<br />month: Jun","count: 5474<br />year: 2023<br />month: Jun","count: 4906<br />year: 2024<br />month: Jun","count: 4768<br />year: 2025<br />month: Jun"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(169,46,94,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Jun","legendgroup":"Jun","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],"base":[15656,16334,14360,17028,17692,17428,16537,16735],"x":[1,2,3,4,5,6,7,8],"y":[4699,4946,2595,4198,4760,5215,5260,5129],"text":["count: 4699<br />year: 2018<br />month: May","count: 4946<br />year: 2019<br />month: May","count: 2595<br />year: 2020<br />month: May","count: 4198<br />year: 2021<br />month: May","count: 4760<br />year: 2022<br />month: May","count: 5215<br />year: 2023<br />month: May","count: 5260<br />year: 2024<br />month: May","count: 5129<br />year: 2025<br />month: May"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(133,33,107,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"May","legendgroup":"May","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],"base":[11706,11770,11700,12798,13126,13199,12109,12104],"x":[1,2,3,4,5,6,7,8],"y":[3950,4564,2660,4230,4566,4229,4428,4631],"text":["count: 3950<br />year: 2018<br />month: Apr","count: 4564<br />year: 2019<br />month: Apr","count: 2660<br />year: 2020<br />month: Apr","count: 4230<br />year: 2021<br />month: Apr","count: 4566<br />year: 2022<br />month: Apr","count: 4229<br />year: 2023<br />month: Apr","count: 4428<br />year: 2024<br />month: Apr","count: 4631<br />year: 2025<br />month: Apr"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(96,19,110,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Apr","legendgroup":"Apr","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],"base":[7407,7457,7235,7600,8286,7978,7657,7626],"x":[1,2,3,4,5,6,7,8],"y":[4299,4313,4465,5198,4840,5221,4452,4478],"text":["count: 4299<br />year: 2018<br />month: Mar","count: 4313<br />year: 2019<br />month: Mar","count: 4465<br />year: 2020<br />month: Mar","count: 5198<br />year: 2021<br />month: Mar","count: 4840<br />year: 2022<br />month: Mar","count: 5221<br />year: 2023<br />month: Mar","count: 4452<br />year: 2024<br />month: Mar","count: 4478<br />year: 2025<br />month: Mar"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(58,9,99,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Mar","legendgroup":"Mar","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],"base":[3364,3290,3560,3177,3648,3650,3466,3543],"x":[1,2,3,4,5,6,7,8],"y":[4043,4167,3675,4423,4638,4328,4191,4083],"text":["count: 4043<br />year: 2018<br />month: Feb","count: 4167<br />year: 2019<br />month: Feb","count: 3675<br />year: 2020<br />month: Feb","count: 4423<br />year: 2021<br />month: Feb","count: 4638<br />year: 2022<br />month: Feb","count: 4328<br />year: 2023<br />month: Feb","count: 4191<br />year: 2024<br />month: Feb","count: 4083<br />year: 2025<br />month: Feb"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(20,11,53,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Feb","legendgroup":"Feb","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.89999999999999991,0.90000000000000013,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999947],"base":[0,0,0,0,0,0,0,0],"x":[1,2,3,4,5,6,7,8],"y":[3364,3290,3560,3177,3648,3650,3466,3543],"text":["count: 3364<br />year: 2018<br />month: Jan","count: 3290<br />year: 2019<br />month: Jan","count: 3560<br />year: 2020<br />month: Jan","count: 3177<br />year: 2021<br />month: Jan","count: 3648<br />year: 2022<br />month: Jan","count: 3650<br />year: 2023<br />month: Jan","count: 3466<br />year: 2024<br />month: Jan","count: 3543<br />year: 2025<br />month: Jan"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,0,4,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Jan","legendgroup":"Jan","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":42.168534661685349,"r":7.3059360730593621,"b":24.508094645080945,"l":37.525944375259442},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"<b> <i> Number of properties sold each month and year in Ireland:<br />2018–present <\/i> <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402243},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,8.5999999999999996],"tickmode":"array","ticktext":["2018","2019","2020","2021","2022","2023","2024","2025"],"tickvals":[1,2,3,4,5,6,7,8],"categoryorder":"array","categoryarray":["2018","2019","2020","2021","2022","2023","2024","2025"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10.62681610626816},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"<b>  <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835198}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-3165,66465],"tickmode":"array","ticktext":["0","20000","40000","60000"],"tickvals":[0,20000,40000,60000],"categoryorder":"array","categoryarray":["0","20000","40000","60000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10.62681610626816},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"<b>  <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835198}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"28e06db4559b":{"x":{},"fill":{},"type":"bar"}},"cur_data":"28e06db4559b","visdat":{"28e06db4559b":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Properties sold by year</p>
</div>
</div>
<p>One last thing to note, before I get too far into the weeds, is that there hasn’t been a bounceback from the “missing” 10,000 sales in 2020. Instead, the 2021 and 2022 sales totals look like a natural progression from the years leading up to 2020.</p>
<p>It’s also worth a quick sconce at quarterly data in recent years. I’ve kept 2019 as a control group, and its numbers are similar to 2021 (12-14-16-18k versus 13-13-15-18k), while 2022 is looking similar at the time of writing (13-15-16k). Only 2020 shows a notable slump, with a massive drop in Q2 and only partial recovery in Q3r. Yet Q4 2020 shows identical numbers to 2019 and 2021 (18k apiece). However, what we might see is a differential in sales of new and second-hand homes as construction of new houses stopped for long periods due to Covid, whereas second-hand houses-to-be already basically existed.</p>
</section>
<section id="new-homes-versus-old" class="level3">
<h3 class="anchored" data-anchor-id="new-homes-versus-old">New homes versus old</h3>
<p>Before we look at the frightening cost of a gaff in this country, I’m going to clean up the “Property Description” column, which is the one that tells you if the gaff is new or old. This will give us an introduction to the absolute state of this dataset:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                                  group  count
1 Second-Hand Dwelling house /Apartment 609317
2         New Dwelling house /Apartment 127141
3        Teach/Árasán Cónaithe Atháimhe     44
4             Teach/Árasán Cónaithe Nua      3
5             Teach/?ras?n C?naithe Nua      1</code></pre>
</div>
</div>
<p>The label ‘New Dwelling house /Apartment’ is not computer-friendly and I’ll change it to ‘New’ (with a cheeky capital because it’ll save me manually relabelling axes later at little cos). Similarly, ‘Second-Hand Dwelling house /Apartment’ will become ‘Old’ an underdescriptive label that at least contrasts nicely against ‘New’. <em>Mar sin féin</em>, <code>new_or_old$count[3:nrow(new_or_old)] %&gt;% sum</code> properties have had their description listed in Irish, so we need to clean those up, and basically translate them back into English. There have been some issues importing the fadas (accents) but we can still group them using ad-hoc regexes.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  group  count percentage
1   Old 609361      82.74
2   New 127145      17.26</code></pre>
</div>
</div>
<p>It is not yet the time to concern ourselves with the fact that only <code>new_or_old_cleaned$count[2]</code> new properties (<code>(100*new_or_old_cleaned$count[2]/nrow(property)) %&gt;% round(1) %&gt;% paste0(.,'%')</code> of them) have been sold in a country which has grown by just over half a million people since 2010.</p>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-d62543a9d034f62138f1" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-d62543a9d034f62138f1">{"x":{"data":[{"orientation":"v","width":0.90000000000000013,"base":0,"x":[2],"y":[15487],"text":"count: 15487<br />factor(year): 2011<br />count: 15487","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(38,82,48,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999991,"base":0,"x":[1],"y":[15689],"text":"count: 15689<br />factor(year): 2010<br />count: 15689","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(38,83,47,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[3],"y":[22197],"text":"count: 22197<br />factor(year): 2012<br />count: 22197","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(70,103,28,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[16],"y":[24248],"text":"count: 24248<br />factor(year): 2025<br />count: 24248","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(80,109,21,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[4],"y":[26324],"text":"count: 26324<br />factor(year): 2013<br />count: 26324","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(91,118,14,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[5],"y":[38245],"text":"count: 38245<br />factor(year): 2014<br />count: 38245","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(171,153,23,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[11],"y":[40097],"text":"count: 40097<br />factor(year): 2020<br />count: 40097","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(184,163,38,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[6],"y":[42920],"text":"count: 42920<br />factor(year): 2015<br />count: 42920","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(204,179,68,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[7],"y":[43056],"text":"count: 43056<br />factor(year): 2016<br />count: 43056","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(205,180,69,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999947,"base":0,"x":[8],"y":[45659],"text":"count: 45659<br />factor(year): 2017<br />count: 45659","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(221,196,101,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[9],"y":[46345],"text":"count: 46345<br />factor(year): 2018<br />count: 46345","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(225,199,109,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[10],"y":[47697],"text":"count: 47697<br />factor(year): 2019<br />count: 47697","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(233,208,126,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[15],"y":[48471],"text":"count: 48471<br />factor(year): 2024<br />count: 48471","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(236,211,135,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[12],"y":[50011],"text":"count: 50011<br />factor(year): 2021<br />count: 50011","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(246,220,153,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[14],"y":[51195],"text":"count: 51195<br />factor(year): 2023<br />count: 51195","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(252,226,167,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[13],"y":[51720],"text":"count: 51720<br />factor(year): 2022<br />count: 51720","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,229,172,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000013,"base":0,"x":[2],"y":[2953],"text":"count:  2953<br />factor(year): 2011<br />count:  2953","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,58,70,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[3],"y":[3174],"text":"count:  3174<br />factor(year): 2012<br />count:  3174","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,58,70,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[4],"y":[3893],"text":"count:  3893<br />factor(year): 2013<br />count:  3893","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(1,59,70,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999991,"base":0,"x":[1],"y":[5312],"text":"count:  5312<br />factor(year): 2010<br />count:  5312","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(6,62,68,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[5],"y":[5422],"text":"count:  5422<br />factor(year): 2014<br />count:  5422","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(6,63,68,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[6],"y":[6242],"text":"count:  6242<br />factor(year): 2015<br />count:  6242","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(7,63,65,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[16],"y":[6556],"text":"count:  6556<br />factor(year): 2025<br />count:  6556","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,63,65,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[7],"y":[6876],"text":"count:  6876<br />factor(year): 2016<br />count:  6876","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(10,64,64,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999947,"base":0,"x":[8],"y":[9356],"text":"count:  9356<br />factor(year): 2017<br />count:  9356","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(16,69,61,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[11],"y":[9443],"text":"count:  9443<br />factor(year): 2020<br />count:  9443","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(17,69,61,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[12],"y":[9569],"text":"count:  9569<br />factor(year): 2021<br />count:  9569","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(18,70,61,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[13],"y":[11001],"text":"count: 11001<br />factor(year): 2022<br />count: 11001","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(21,71,57,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[9],"y":[11101],"text":"count: 11101<br />factor(year): 2018<br />count: 11101","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(21,72,57,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[10],"y":[11355],"text":"count: 11355<br />factor(year): 2019<br />count: 11355","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(23,72,57,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[14],"y":[12105],"text":"count: 12105<br />factor(year): 2023<br />count: 12105","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(25,75,56,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[15],"y":[12787],"text":"count: 12787<br />factor(year): 2024<br />count: 12787","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(26,76,54,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":53.858032378580333,"r":7.3059360730593621,"b":24.508094645080945,"l":37.525944375259442},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"<b> <i> Number of properties sold each year, old & new <\/i> <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402243},"x":0,"xref":"paper"},"xaxis":{"domain":[0,0.49592302674494454],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,16.600000000000001],"tickmode":"array","ticktext":["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023","2024","2025"],"tickvals":[1,2,3.0000000000000004,4,5,6,7,8,9,10,11,12,13,14,15,16],"categoryorder":"array","categoryarray":["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023","2024","2025"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10.62681610626816},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2586,54306],"tickmode":"array","ticktext":["0","10000","20000","30000","40000","50000"],"tickvals":[0,10000,20000,30000,40000,50000],"categoryorder":"array","categoryarray":["0","10000","20000","30000","40000","50000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10.62681610626816},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":0.49592302674494454,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":0.49592302674494454,"y0":0,"y1":23.37899543378996,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0.5040769732550554,"x1":1,"y0":0,"y1":1},{"type":"rect","fillcolor":"rgba(217,217,217,1)","line":{"color":"transparent","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","layer":"below","x0":0.5040769732550554,"x1":1,"y0":0,"y1":23.37899543378996,"yanchor":1,"ysizemode":"pixel"}],"annotations":[{"text":"Old","x":0.24796151337247227,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"New","x":0.7520384866275277,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.68949771689498},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"xaxis2":{"type":"linear","autorange":false,"range":[0.40000000000000002,16.600000000000001],"tickmode":"array","ticktext":["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023","2024","2025"],"tickvals":[1,2,3.0000000000000004,4,5,6,7,8,9,10,11,12,13,14,15,16],"categoryorder":"array","categoryarray":["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023","2024","2025"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10.62681610626816},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.5040769732550554,1],"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"28e019e015a7":{"x":{},"fill":{},"type":"bar"}},"cur_data":"28e019e015a7","visdat":{"28e019e015a7":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="eircodes" class="level3">
<h3 class="anchored" data-anchor-id="eircodes">Eircodes</h3>
<p>Recent years have contained eircode data which is a great addition, but unfortunately that column has been added at the expense of an postcode column which, while sparsely populated and confined solely to Dublin, will remain a useful bit of data when we are trying to find which towns and villages belong in which part of Dublin.</p>
<p>Before we examine eircode data, we need to convert the ‘date’ column from a string to an actual date variable, and also extract the months, weeks, day and day of the week, as this may be valuable data for modelling later.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="chapter_1_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="house-prices-by-county" class="level3">
<h3 class="anchored" data-anchor-id="house-prices-by-county">House prices by county</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="chapter_1_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-2ad8d1a247fa3ef06853" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-2ad8d1a247fa3ef06853">{"x":{"data":[{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025],"y":[202000,170000,150000,138000,150000,162500,183000,210000,226138,235000,240000,256000,285000,302000,327200.5,348000],"text":["year: 2010<br />price: 202000.0","year: 2011<br />price: 170000.0","year: 2012<br />price: 150000.0","year: 2013<br />price: 138000.0","year: 2014<br />price: 150000.0","year: 2015<br />price: 162500.0","year: 2016<br />price: 183000.0","year: 2017<br />price: 210000.0","year: 2018<br />price: 226138.0","year: 2019<br />price: 235000.0","year: 2020<br />price: 240000.0","year: 2021<br />price: 256000.0","year: 2022<br />price: 285000.0","year: 2023<br />price: 302000.0","year: 2024<br />price: 327200.5","year: 2025<br />price: 348000.0"],"type":"scatter","mode":"lines+markers","line":{"width":7.559055118110237,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","marker":{"autocolorscale":false,"color":"rgba(255,165,0,1)","opacity":1,"size":15.118110236220474,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(255,165,0,1)"}},"frame":null}],"layout":{"margin":{"t":42.168534661685349,"r":7.3059360730593621,"b":24.508094645080945,"l":37.525944375259442},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"<b> <i> Median price of properties sold in Ireland, 2010-present <\/i> <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":15.940224159402243},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2009.25,2025.75],"tickmode":"array","ticktext":["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023","2024","2025"],"tickvals":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025],"categoryorder":"array","categoryarray":["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023","2024","2025"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10.62681610626816},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"<b>  <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835198}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,368000],"tickmode":"array","ticktext":["0e+00","1e+05","2e+05","3e+05"],"tickvals":[0,100000,200000,300000],"categoryorder":"array","categoryarray":["0e+00","1e+05","2e+05","3e+05"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":10.62681610626816},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"<b>  <\/b>","font":{"color":"rgba(0,0,0,1)","family":"","size":13.283520132835198}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"28e0779c1552":{"x":{},"y":{},"type":"scatter"},"28e02e932614":{"x":{},"y":{}}},"cur_data":"28e0779c1552","visdat":{"28e0779c1552":["function (y) ","x"],"28e02e932614":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="chapter_1_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/A2dez\.github\.io\/portfolio\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>